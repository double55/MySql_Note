# MySql_undo日志的工作原理

redo log主要用来保证事务的持久性，而undo log是用来保证事务的原子性。

undo log会帮我们记录每一条数据变更的逆向过程。比如insert一条记录，那么undo log会记录delete这条记录。update一条记录，undo log会帮我们记录update之前的值。

## undo log的作用

1. 回滚数据

undo日志会将我们的数据库记录进行逻辑性的恢复。而不是物理性的，数据读取依靠我们的页，在同一时刻，可能有成百上千的事务在进行，我们不能将整个页进行回滚，这样会影响其他记录。

2. MVCC版本并发控制

MVCC是基于undo log进行实现的。当我们的用户进行一条记录读取的时候，而这条记录又被其他事务说占用，那么读取的事务可以通过undo log来获取到原有的数据。

